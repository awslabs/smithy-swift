description = "HTTP Core for Smithy services generated by smithy-kotlin"
extra["displayName"] = "Smithy :: Kotlin :: HTTP Core"
extra["moduleName"] = "software.aws.clientrt.http"

val ktorVersion: String by project

kotlin {

    sourceSets {
        commonMain {
            dependencies {
                api(project(":client-runtime:client-rt-core"))
                implementation(project(":client-runtime:utils"))
                implementation(project(":client-runtime:io"))
                // for Pipeline abstraction which already supports suspend functions
                api("io.ktor:ktor-utils:$ktorVersion")
                // HttpSerialize/Deserialize
                api(project(":client-runtime:serde"))
            }
        }

        commonTest {
            dependencies {
                implementation(project(":client-runtime:testing"))
                // for testing a concrete provider
                implementation(project(":client-runtime:serde:serde-json"))
                implementation(project(":client-runtime:serde:serde-xml"))
            }
        }

        jvmMain {
            dependencies {
                api("io.ktor:ktor-utils-jvm:$ktorVersion")
            }
        }
    }
}