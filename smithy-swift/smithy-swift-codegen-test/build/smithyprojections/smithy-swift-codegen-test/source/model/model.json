{
  "smithy": "0.5.0",
  "shapes": {
    "example.weather.nested.more#Baz": {
      "type": "structure",
      "members": {
        "bar": {
          "target": "smithy.api#String"
        },
        "baz": {
          "target": "smithy.api#String"
        }
      }
    },
    "example.weather#City": {
      "type": "resource",
      "identifiers": {
        "cityId": {
          "target": "example.weather#CityId"
        }
      },
      "read": {
        "target": "example.weather#GetCity"
      },
      "list": {
        "target": "example.weather#ListCities"
      },
      "resources": [
        {
          "target": "example.weather#CityImage"
        },
        {
          "target": "example.weather#Forecast"
        }
      ]
    },
    "example.weather#CityCoordinates": {
      "type": "structure",
      "members": {
        "latitude": {
          "target": "smithy.api#PrimitiveFloat",
          "traits": {
            "smithy.api#required": true
          }
        },
        "longitude": {
          "target": "smithy.api#Float",
          "traits": {
            "smithy.api#required": true
          }
        }
      }
    },
    "example.weather#CityId": {
      "type": "string",
      "traits": {
        "smithy.api#pattern": "^[A-Za-z0-9 ]+$"
      }
    },
    "example.weather#CityImage": {
      "type": "resource",
      "identifiers": {
        "cityId": {
          "target": "example.weather#CityId"
        }
      },
      "read": {
        "target": "example.weather#GetCityImage"
      }
    },
    "example.weather#CityImageData": {
      "type": "blob"
    },
    "example.weather#CitySummaries": {
      "type": "list",
      "member": {
        "target": "example.weather#CitySummary"
      }
    },
    "example.weather#CitySummary": {
      "type": "structure",
      "members": {
        "case": {
          "target": "smithy.api#String"
        },
        "cityId": {
          "target": "example.weather#CityId",
          "traits": {
            "smithy.api#required": true
          }
        },
        "name": {
          "target": "smithy.api#String",
          "traits": {
            "smithy.api#required": true
          }
        },
        "number": {
          "target": "smithy.api#String"
        }
      },
      "traits": {
        "smithy.api#references": [
          {
            "resource": "example.weather#City"
          }
        ]
      }
    },
    "example.weather.nested#Foo": {
      "type": "structure",
      "members": {
        "bar": {
          "target": "smithy.api#String"
        },
        "baz": {
          "target": "smithy.api#String"
        }
      }
    },
    "example.weather#Forecast": {
      "type": "resource",
      "identifiers": {
        "cityId": {
          "target": "example.weather#CityId"
        }
      },
      "read": {
        "target": "example.weather#GetForecast"
      }
    },
    "example.weather#GetCity": {
      "type": "operation",
      "input": {
        "target": "example.weather#GetCityInput"
      },
      "output": {
        "target": "example.weather#GetCityOutput"
      },
      "errors": [
        {
          "target": "example.weather#NoSuchResource"
        }
      ],
      "traits": {
        "smithy.api#http": {
          "method": "GET",
          "uri": "/cities/{cityId}",
          "code": 200
        },
        "smithy.api#readonly": true
      }
    },
    "example.weather#GetCityImage": {
      "type": "operation",
      "input": {
        "target": "example.weather#GetCityImageInput"
      },
      "output": {
        "target": "example.weather#GetCityImageOutput"
      },
      "errors": [
        {
          "target": "example.weather#NoSuchResource"
        }
      ],
      "traits": {
        "smithy.api#http": {
          "method": "GET",
          "uri": "/cities/{cityId}/image",
          "code": 200
        },
        "smithy.api#readonly": true
      }
    },
    "example.weather#GetCityImageInput": {
      "type": "structure",
      "members": {
        "cityId": {
          "target": "example.weather#CityId",
          "traits": {
            "smithy.api#httpLabel": true,
            "smithy.api#required": true
          }
        }
      }
    },
    "example.weather#GetCityImageOutput": {
      "type": "structure",
      "members": {
        "image": {
          "target": "example.weather#CityImageData",
          "traits": {
            "smithy.api#httpPayload": true,
            "smithy.api#streaming": { }
          }
        }
      }
    },
    "example.weather#GetCityInput": {
      "type": "structure",
      "members": {
        "cityId": {
          "target": "example.weather#CityId",
          "traits": {
            "smithy.api#httpLabel": true,
            "smithy.api#required": true
          }
        }
      },
      "traits": {
        "smithy.api#documentation": "The input used to get a city."
      }
    },
    "example.weather#GetCityOutput": {
      "type": "structure",
      "members": {
        "city": {
          "target": "example.weather#CitySummary"
        },
        "coordinates": {
          "target": "example.weather#CityCoordinates",
          "traits": {
            "smithy.api#required": true
          }
        },
        "name": {
          "target": "smithy.api#String",
          "traits": {
            "smithy.api#required": true
          }
        }
      }
    },
    "example.weather#GetCurrentTime": {
      "type": "operation",
      "output": {
        "target": "example.weather#GetCurrentTimeOutput"
      },
      "traits": {
        "smithy.api#http": {
          "method": "GET",
          "uri": "/current-time",
          "code": 200
        },
        "smithy.api#readonly": true
      }
    },
    "example.weather#GetCurrentTimeOutput": {
      "type": "structure",
      "members": {
        "time": {
          "target": "smithy.api#Timestamp",
          "traits": {
            "smithy.api#required": true
          }
        }
      }
    },
    "example.weather#GetForecast": {
      "type": "operation",
      "input": {
        "target": "example.weather#GetForecastInput"
      },
      "output": {
        "target": "example.weather#GetForecastOutput"
      },
      "traits": {
        "smithy.api#http": {
          "method": "GET",
          "uri": "/cities/{cityId}/forecast",
          "code": 200
        },
        "smithy.api#readonly": true
      }
    },
    "example.weather#GetForecastInput": {
      "type": "structure",
      "members": {
        "cityId": {
          "target": "example.weather#CityId",
          "traits": {
            "smithy.api#httpLabel": true,
            "smithy.api#required": true
          }
        }
      }
    },
    "example.weather#GetForecastOutput": {
      "type": "structure",
      "members": {
        "chanceOfRain": {
          "target": "smithy.api#Float"
        }
      }
    },
    "example.weather#ListCities": {
      "type": "operation",
      "input": {
        "target": "example.weather#ListCitiesInput"
      },
      "output": {
        "target": "example.weather#ListCitiesOutput"
      },
      "traits": {
        "smithy.api#http": {
          "method": "GET",
          "uri": "/cities",
          "code": 200
        },
        "smithy.api#paginated": {
          "items": "items"
        },
        "smithy.api#readonly": true
      }
    },
    "example.weather#ListCitiesInput": {
      "type": "structure",
      "members": {
        "nextToken": {
          "target": "smithy.api#String",
          "traits": {
            "smithy.api#httpQuery": "nextToken"
          }
        },
        "pageSize": {
          "target": "smithy.api#Integer",
          "traits": {
            "smithy.api#httpQuery": "pageSize"
          }
        }
      }
    },
    "example.weather#ListCitiesOutput": {
      "type": "structure",
      "members": {
        "items": {
          "target": "example.weather#CitySummaries",
          "traits": {
            "smithy.api#required": true
          }
        },
        "nextToken": {
          "target": "smithy.api#String"
        }
      }
    },
    "example.weather#NoSuchResource": {
      "type": "structure",
      "members": {
        "message": {
          "target": "smithy.api#String"
        },
        "resourceType": {
          "target": "smithy.api#String",
          "traits": {
            "smithy.api#documentation": "The type of resource that was not found.",
            "smithy.api#required": true
          }
        }
      },
      "traits": {
        "smithy.api#documentation": "Error encountered when no resource could be found.",
        "smithy.api#error": "client",
        "smithy.api#httpError": 404
      }
    },
    "example.weather#OtherStructure": {
      "type": "structure",
      "members": { }
    },
    "example.weather#Precipitation": {
      "type": "union",
      "members": {
        "baz": {
          "target": "example.weather.nested.more#Baz"
        },
        "blob": {
          "target": "smithy.api#Blob"
        },
        "hail": {
          "target": "example.weather#StringMap"
        },
        "mixed": {
          "target": "example.weather#TypedYesNo"
        },
        "other": {
          "target": "example.weather#OtherStructure"
        },
        "rain": {
          "target": "smithy.api#PrimitiveBoolean"
        },
        "sleet": {
          "target": "smithy.api#PrimitiveBoolean"
        },
        "snow": {
          "target": "example.weather#SimpleYesNo"
        }
      }
    },
    "example.weather#SimpleYesNo": {
      "type": "string",
      "traits": {
        "smithy.api#enum": {
          "YES": { },
          "NO": { }
        }
      }
    },
    "example.weather#StringMap": {
      "type": "map",
      "key": {
        "target": "smithy.api#String"
      },
      "value": {
        "target": "smithy.api#String"
      }
    },
    "example.weather#TypedYesNo": {
      "type": "string",
      "traits": {
        "smithy.api#enum": {
          "YES": {
            "name": "YES"
          },
          "NO": {
            "name": "NO"
          }
        }
      }
    },
    "example.weather#Weather": {
      "type": "service",
      "version": "2006-03-01",
      "operations": [
        {
          "target": "example.weather#GetCurrentTime"
        }
      ],
      "resources": [
        {
          "target": "example.weather#City"
        }
      ],
      "traits": {
        "smithy.api#documentation": "Provides weather forecasts.",
        "smithy.api#paginated": {
          "inputToken": "nextToken",
          "outputToken": "nextToken",
          "pageSize": "pageSize"
        },
        "smithy.api#protocols": [
          {
            "name": "aws.rest-json-1.1"
          }
        ]
      }
    }
  }
}
